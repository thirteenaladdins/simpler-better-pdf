/*!
 * Nutrient Web SDK 1.2.0 (https://www.nutrient.io/sdk/web)
 *
 * Copyright (c) 2016-2025 PSPDFKit GmbH. All rights reserved.
 *
 * THIS SOURCE CODE AND ANY ACCOMPANYING DOCUMENTATION ARE PROTECTED BY INTERNATIONAL COPYRIGHT LAW
 * AND MAY NOT BE RESOLD OR REDISTRIBUTED. USAGE IS BOUND TO THE PSPDFKIT LICENSE AGREEMENT.
 * UNAUTHORIZED REPRODUCTION OR DISTRIBUTION IS SUBJECT TO CIVIL AND CRIMINAL PENALTIES.
 * This notice may not be removed from this file.
 *
 * PSPDFKit uses several open source third-party components: https://www.nutrient.io/legal/acknowledgements/web-acknowledgements/
 */
(globalThis.webpackChunkNutrientViewer=globalThis.webpackChunkNutrientViewer||[]).push([[750],{1033:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>z});var r=n(67136),s=n(49568),i=n(85409),o=n(45646),a=n(6163),l=n(99589),h=n(2752),c=n(55994),u=n(34551),d=n(47159),p=n(5293),m=n(97881),f=n(14631),g=n(54781),E=n(85553);class v extends(s.mS({authPayload:null,serverUrl:null,hostedBaseUrl:null,documentId:null,layerName:null,sourcePdfSha256:null,backendPermissions:null,documentURL:null,imageToken:null,instantSettings:null,token:null,features:(0,s.B8)(),signatureFeatureAvailability:E.g.NONE,isFormsEnabled:!0,minSearchQueryLength:1,documentHandle:null,isDocumentHandleOutdated:!1,digitalSignatures:null,defaultGroup:void 0,hasCollaborationPermissions:!1,forceLegacySignaturesFeature:!1,disableWebAssemblyStreaming:!1,overrideMemoryLimit:null,baseCoreUrl:null,useDeprecatedRestProvider:!1})){}var w=n(14511),y=n(15168),$=n(28650),R=n(85410),S=n(9627);const I="The image can not be rendered because of an unknown error.";class P{constructor(e){let{identifier:t,url:n,token:r,payload:s,doNotRequestWebP:i=!1}=e;this.identifier=t,this.url=n,this.token=r,this.payload=s,this.doNotRequestWebP=i}abort(){this.httpRequest?.abort()}request(){return new Promise(((e,t)=>{const n=new XMLHttpRequest;this.httpRequest=n,n.open(this.payload?"POST":"GET",this.url,!0),n.setRequestHeader("X-PSPDFKit-Image-Token",this.token),n.setRequestHeader("PSPDFKit-Platform","web"),n.setRequestHeader("PSPDFKit-Version",(0,R._q)()),y.xd&&!this.doNotRequestWebP&&n.setRequestHeader("Accept","image/webp,*/*"),n.responseType="blob",n.onreadystatechange=(async()=>{if(4!==n.readyState)return;if(n.response&&n.response.type.startsWith("application/json")){const r=new FileReader;return r.onload=n=>{const r=JSON.parse(n.target?.result);r.attachments_not_found?e({attachmentsNotFound:r.attachments_not_found}):r.error?"initialization_error"===r.error?e(null):t(new i.uE(`The server could not render the requested image (${r.error})`)):t(new i.uE(I))},r.onerror=()=>t(new i.uE(I)),void r.readAsText(n.response)}if(!(0,w.Nk)(n.status))return void t(new i.uE(I));const r=n.response,s=URL.createObjectURL(r),o=new Image;o.onerror=()=>t(new i.uE(I)),o.src=s;const a=o.decode();try{await a}catch(e){if(!S.H8)throw new i.uE(`The image could not be decoded: ${e.message}`);await new Promise((e=>setTimeout(e,200)))}e(new $.A(o,(()=>URL.revokeObjectURL(s))))}).bind(this),n.send(this.payload)}))}}var b=n(37361),A=n(89574),_=n(41477),N=n(51946),T=n(30026);async function L(e,t,n){const r=await fetch(`${e}/auth`,{method:"POST",headers:{"Content-Type":"application/json","PSPDFKit-Platform":"web","PSPDFKit-Version":(0,R._q)()},body:JSON.stringify({jwt:t.jwt,password:n}),credentials:"include"});return r.ok?r.json():r.text().then((e=>{throw"INVALID_PASSWORD"===e?new i.uE(e):new i.uE(`An error occurred while connecting to Nutrient Document Engine: ${e||r.statusText}`)}))}var O=n(25888),x=n(4824),F=n(12219),D=n(37094),C=n(72262),U=n(40927),j=n(9939),k=n(83720),M=n(64337),G=n(89055),B=n(20546),V=n(37506),X=n(26175),q=n(77270),H=n(20873);class z extends C.K{constructor(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;super(),t=this,(0,r.A)(this,"_password",null),(0,r.A)(this,"type","SERVER"),(0,r.A)(this,"_requestRenderAnnotation",((e,n,r,s,o,l)=>{const h=`${this._state.documentURL}/render_annotation`,c=`render-annotation-${l?(0,a.Z0)():e.id}`,u=JSON.stringify({data:(0,m.eq)(e),width:s,height:o,detached:l||void 0,formFieldValue:n?(0,m.cA)(n):void 0});let d=!1,p=[];const f=(0,q.yl)();let g;if((0,A.cu)(e)){if(g=(0,A.sS)(e),this.isVisuallyIdenticalAnnotationCached({annotation:e,providedVisualAnnotationIndex:g,width:s,height:o}))return this.cachedRenderedAnnotationDiscardablePromise(g,f);this._addCachedRenderedAnnotation(g,{width:s,height:o,noZoom:e.noZoom,APStreamPromise:f.promise})}const E=function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const a=new FormData;a.append("render",u),n.length>0&&"imageAttachmentId"in e&&e.imageAttachmentId&&r&&a.append(e.imageAttachmentId,r);const l=new P({identifier:c,url:h,token:t._state.imageToken,payload:a,doNotRequestWebP:s>b.HI||o>b.HI}),m=t._requestQueue.enqueue(l,!1);m.promise.then((n=>{if(!d)if(n?.attachmentsNotFound)E(n.attachmentsNotFound);else{if(!n?.attachmentsNotFound)return(0,A.cu)(e)&&t._makeEnqueuedRelease(n,g),f.resolve(n),n;f.reject(new i.uE("Attachment could not be found."))}})).catch((e=>{const n=t._cachedRenderedAnnotations.get(g);n&&n.timeout&&clearTimeout(n.timeout),t._cachedRenderedAnnotations.delete(g),d?f.resolve(void 0):f.reject(e)})),p.push(m)};return E(),{promise:f.promise,cancel:()=>{d=!0,p.forEach((e=>{e.cancel()}))}}})),(0,r.A)(this,"_requestRenderAnnotations",((e,t,n,r,s)=>{const i=`${this._state.documentURL}/render_annotations`,o=JSON.stringify({annotations:t.map(((t,s)=>({pageIndex:e,pdfObjectId:t,width:n[s],height:r[s]}))),formFieldValues:s});let a,l,h=!1;const c=new Promise(((e,t)=>{a=e,l=t}));return this._fetch(i,{method:"post",body:o,credentials:"include",headers:{"X-PSPDFKit-Image-Token":this._state.imageToken,"Content-Type":"application/json",Accept:"multipart/form-data"}}).then((e=>e.formData())).then((e=>{h||a(Array.from(e.values()))})).catch((e=>{h||l(e)})),{promise:c,cancel:()=>{h=!0}}})),(0,r.A)(this,"handleDocumentHandleConflict",(()=>{this._state=this._state.set("isDocumentHandleOutdated",!0),this.cancelRequests(),this._destroyProvider()}));let s=null;if("session"in e){if("string"!=typeof e.session)throw new i.uE("The supplied session token is invalid. Must be a string.");s={jwt:e.session},e.instant=!("instant"in e)||"boolean"!=typeof e.instant&&!(0,i.Qd)(e.instant)||e.instant}else"authPayload"in e&&(s=e.authPayload);if("object"!=typeof s)throw new i.uE("authPayload must be an object that contains the `jwt`. For example: `authPayload: { jwt: 'xxx.xxx.xxx'}`");const l=s?.accessToken;let h=null,c=null,u="documentId"in e?e.documentId:null,d=null;if(l)d=e.hostedBaseUrl||"https://api.pspdfkit.com/",(0,w.Me)(d),(0,f.P1)(l);else{if(!s||"object"!=typeof s||!("jwt"in s)||"string"!=typeof s.jwt)throw new i.uE("authPayload must be an object that contains the `jwt`. For example: `authPayload: { jwt: 'xxx.xxx.xxx'}`");const{serverUrl:t,documentId:r}=(0,f.Gm)(s.jwt);if(h=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window;const r=e.serverUrl||t||(0,R.$_)(n.document);if("/"!==r.substr(-1))throw new i.uE("`serverUrl` must have a slash at the end (e.g. `https://pspdfkit.example.com/`).");if(!e.serverUrl&&r===(0,w.ln)(n.location.origin))throw new i.uE('PSPDFKit automatically infers the URL of Nutrient Document Engine from the current `<script>` tag.\nIn the current case, this URL is set to the same as the current browser\'s location.\nThis can happen when you bundle nutrient-viewer.js with your custom JavaScript for example.\n\nTo make sure everything works as expected, please set the `serverUrl` to the URL of Nutrient Document Engine:\n\nPSPDFKit.load({\n  serverUrl: "https://pspdfkit-server.example.com/",\n  ...,\n});');return r}(e,t,n),u=u||r,"string"!=typeof u)throw new i.uE("`documentId` must be of type string.");c=`${h}i/d/${u}`}!function(e){let t="";if("boolean"!=typeof e&&((0,i.Qd)(e)?(e.hasOwnProperty("clientsPresenceEnabled")&&"boolean"!=typeof e.clientsPresenceEnabled&&(t+="`clientsPresenceEnabled` in instance settings is not valid. Must be `true` or `false`.\n"),e.hasOwnProperty("listenToServerChangesEnabled")&&"boolean"!=typeof e.listenToServerChangesEnabled&&(t+="`listenToServerChangesEnabled` in instance settings is not valid. Must be `true` or `false`.\n")):t="`instant` flag must either be set to `true` or `false`\n",t))throw new i.uE(`${t}\nFor more information about PSPDFKit Instant please visit:\nhttps://pspdfkit.com/guides/web/current/instant/overview/`)}(e.instant);let p=null;if(e.instant)if((0,i.Qd)(e.instant)){const t=e.instant;p={clientsPresenceEnabled:!1!==t.clientsPresenceEnabled,listenToServerChangesEnabled:!1!==t.listenToServerChangesEnabled}}else p=x.S;this._requestQueue=new o.L(b.LB);const g=!!e.electronicSignatures&&Boolean(e.electronicSignatures.forceLegacySignaturesFeature),E=e.baseUrl||(0,R.$_)(window.document),y=e.baseCoreUrl||E;this._state=new v({serverUrl:h,hostedBaseUrl:d,documentId:u,instantSettings:p,documentURL:c,authPayload:s,isFormsEnabled:!e.disableForms,forceLegacySignaturesFeature:g,disableWebAssemblyStreaming:e.disableWebAssemblyStreaming,overrideMemoryLimit:e.overrideMemoryLimit,baseCoreUrl:y,useDeprecatedRestProvider:e.useDeprecatedRestProvider}),"trustedCAsCallback"in e&&e.trustedCAsCallback&&(0,i.R8)("PSPDFKit.Configuration#trustedCAsCallback is only used on Standalone deployments. On a Server-Backed deployment, please follow the instructions at https://pspdfkit.com/guides/web")}isUsingInstantProvider(){return!this._state.useDeprecatedRestProvider}hasClientsPresence(){const e=this._state.instantSettings;return null!=e&&!1!==e.clientsPresenceEnabled}async load(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};await this.tryAuthenticateHostedViewer();const{imageToken:t,token:n,permissions:r,features:o,signatureFeatureAvailability:a,hasPassword:u,minSearchQueryLength:d,layerHandle:p,allowedTileScales:f,digitalSignatures:g,defaultGroup:v,collaborationPermissions:w,creatorName:y,documentEngineVersion:$,layerName:S,sourcePdfSha256:I}=await L(`${this._state.serverUrl}i/d/${this._state.documentId}`,this._state.authPayload,e.password);this._password=e.password;const P=(0,l.valid)((0,l.coerce)($));if(this.documentEngineVersion=P,!this.satisfiesDocumentEngineVersion(">=1.5.6"))throw new i.uE(`Document Engine version ${$} does not meet minimum required version requirement >=1.5.6.`);if(this._state.instantSettings&&!o.includes(M.Y.INSTANT))throw new i.uE("Instant feature is not enabled on this server. Please set `instant` to `false`.\n\nFor more information about PSPDFKit Instant please visit:\nhttps://pspdfkit.com/guides/web/current/instant/overview/");if(this._state.useDeprecatedRestProvider&&this._state.instantSettings)throw new i.uE("Instant feature can't be enabled together with using deprecated REST provider. Please set either `instant` or `useDeprecatedRestProvider` to `false`.\n\nFor more information about PSPDFKit Instant please visit:\nhttps://pspdfkit.com/guides/web/current/instant/overview/");const b=!o.includes(M.Y.INSTANT)&&!this.satisfiesDocumentEngineVersion(">=1.7.0"),A=a===E.g.ELECTRONIC_SIGNATURES&&(0,G.UX)(o)&&this._state.forceLegacySignaturesFeature?E.g.LEGACY_SIGNATURES:a;this._state=this._state.withMutations((e=>e.set("imageToken",t).set("token",n).set("features",(0,s.B8)(o)).set("signatureFeatureAvailability",A).set("backendPermissions",new T.A({readOnly:-1===r.indexOf("write"),downloadingAllowed:r.indexOf("download")>=0})).set("documentURL",`${this._state.serverUrl}i/d/${this._state.documentId}/h/${p}`).set("documentHandle",p).set("isDocumentHandleOutdated",!1).set("digitalSignatures",(0,m.N5)(g)).set("layerName",S).set("sourcePdfSha256",I).set("useDeprecatedRestProvider",b||e.useDeprecatedRestProvider)));if(this.corePDFBridge=new X.D(h.MX.createServerContext({url:this._state.serverUrl,token:this._state.token,imageToken:this._state.imageToken,documentId:this._state.documentId,layerHandle:p,headers:{"PSPDFKit-Platform":"web","PSPDFKit-Version":(0,R._q)()}},(async()=>{const t=H.mG.checkOut().object,n=(0,R.f)(null),r=await L(`${this._state.serverUrl}i/d/${this._state.documentId}`,this._state.authPayload,e.password);return(0,i.V1)(r.wasmToken,"No wasmToken was returned from the server."),(0,i.V1)(this._state.baseCoreUrl),await t.loadNativeModule(this._state.baseCoreUrl,{mainThreadOrigin:n,disableWebAssemblyStreaming:this._state.disableWebAssemblyStreaming,enableAutomaticLinkExtraction:!1,overrideMemoryLimit:this._state.overrideMemoryLimit,workerSpawnerFn:()=>c.pj(!0)}).then((async()=>t.load("",r.wasmToken,{mainThreadOrigin:n,productId:null}))),t}),(e=>this.satisfiesDocumentEngineVersion(e)))),w&&!this._state.instantSettings)throw new i.uE("Collaboration Permissions is not supported when `instant` is disabled. Please make sure `configuration#instant` is set to `true`.");return this._state=this._state.withMutations((e=>{e.defaultGroup=v,e.hasCollaborationPermissions=Boolean(w)})),this.provider&&this.provider.destroy(),this.provider=await this._initProvider(),{features:this._state.features,signatureFeatureAvailability:this._state.signatureFeatureAvailability,hasPassword:u,password:this._password,minSearchQueryLength:d,allowedTileScales:f,creatorName:y,defaultGroup:v}}satisfiesDocumentEngineVersion(e){return!!this.documentEngineVersion&&(0,l.satisfies)(this.documentEngineVersion,e)}async tryAuthenticateHostedViewer(){if("accessToken"in this._state.authPayload){const{hostedBaseUrl:e}=this._state,t=this._state.authPayload.accessToken,{serverUrl:n,serverId:r,jwt:s}=await async function(e,t){const n=await fetch(`${e}i/documents/auth`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","PSPDFKit-Platform":"web","PSPDFKit-Version":"cloud-protocol=1, server-protocol=5, client=1.2.0, client-git=a58562548c"},body:JSON.stringify({accessToken:t})});if(n.ok)return n.json();throw new Error(`An error occurred while connecting to PSPDFKit API: ${await n.text()}`)}(e,t);this._state=this._state.withMutations((e=>{e.set("serverUrl",n).set("documentId",r).set("documentURL",`${n}i/d/${r}`).set("authPayload",{jwt:s})}))}}async _initProvider(){if(this._state.useDeprecatedRestProvider){const e=this._state.isFormsEnabled&&this._state.features.includes(M.Y.FORMS),{RESTProvider:t}=await n.e(269).then(n.bind(n,33393));return new t(this._state.documentURL,{token:this._state.token},{isFormsEnabled:e})}{const e=`${this._state.serverUrl}i/d/${this._state.documentId}/h/${this._state.documentHandle}`,{InstantProvider:t}=await n.e(534).then(n.bind(n,15124)),r=new t(`${this._state.serverUrl}i/d/${this._state.documentId}`,e,{auth_token:this._state.token},this._state.instantSettings||x.z);return r.setDocumentHandleConflictCallback(this.handleDocumentHandleConflict),r}}destroy(){this._destroyProvider(),this._requestQueue&&this._requestQueue.destroy()}documentInfo(){return this._fetch(`${this._state.documentURL}/document.json`).then((e=>e.json())).then((e=>e.data))}getFormJSON(){return this._fetch(`${this._state.documentURL}/form.json`).then((e=>403===e.status?{v:1,type:"pspdfkit/form",annotations:[],fields:[]}:e.json().then((e=>e.data))))}async evalFormValuesActions(){throw new Error("not implemented")}async evalScript(){throw new Error("not implemented")}async setFormJSONUpdateBatchMode(){throw new Error("not implemented")}compareDocuments(){throw new Error("not implemented")}updateButtonIcon(){throw new Error("not implemented")}permissions(){return Promise.resolve(this._state.backendPermissions)}getDefaultGroup(){return this._state.defaultGroup}isCollaborationPermissionsEnabled(){return this._state.hasCollaborationPermissions}textForPageIndex(e){return this.corePDFBridge.getTextLines(e)}async getSuggestedLineHeightFactor(){return 1}async getAnnotationsByScale(){return[]}getAvailableFontFaces(){throw new i.uE("Custom fonts need to be mounted on the server in Server-Backed deployments.")}getContentTreeForPageIndex(e){return this.corePDFBridge.getContentTree(e)}getTextFromRects(e,t){const n=encodeURIComponent(JSON.stringify(t.map(p.w).toArray()));return this._fetch(`${this._state.documentURL}/page-${e}-highlighted?rects=${n}`).then((e=>e.json())).then((e=>e.text))}_getJSONRequestHandler(){return g.A}renderAnnotation(e,t,n,r,s){return this._requestRenderAnnotation(e,t,n,r,s)}async renderPageAnnotations(e,t,n){const r=this.provider,s=t.some((e=>e instanceof N.sb));s&&await r._setReadStateCallbacksPromise;const i=[],o=t.filter((e=>{const t=s?r._readStateCallbacks.getAnnotationWithFormField(e.id):null,n=t?.formField,o=(0,A.lG)(e,n);if(o&&n&&"number"==typeof e.pdfObjectId){i.find((e=>e.name===n.name))||i.push((0,m.cA)((0,k.Af)(n)))}return o&&"number"==typeof e.pdfObjectId}));if(0===o.size&&0===i.length)return Promise.resolve();const a=new Promise(((t,r)=>{const s=o.filter((e=>0!==Math.floor(e.boundingBox.width*n)&&0!==Math.floor(e.boundingBox.height*n))),{promise:a,cancel:l}=this._requestRenderAnnotations(e,s.map((e=>e.pdfObjectId)).toArray(),s.map((e=>Math.floor(e.boundingBox.width*n))).toArray(),s.map((e=>Math.floor(e.boundingBox.height*n))).toArray(),i);a.then((e=>{const n=e.map((e=>e&&(0,j.BJ)(e)));n.forEach((async(e,t)=>{const n=await e,r=s.get(t);if(r){const e=this.annotationAPStreamPromises.get(r.id);e&&(this.annotationAPStreamPromises=this.annotationAPStreamPromises.delete(r.id),e(n)),n&&this.cacheAPStream(n,r)}})),Promise.all(n).then((()=>t()))})).catch((e=>{l(),r(e)}))}));return this.pageAPStreamsPromises=this.pageAPStreamsPromises.set(e,a),a}renderDetachedAnnotation(e,t,n,r){return this._requestRenderAnnotation(e,null,t,n,r,!0)}async getAttachment(e){try{const t=await this._fetch(`${this._state.documentURL}/attachments/${e}`);switch(t.status){case 404:throw new i.uE("Attachment not Found.");case 200:return await t.blob();default:throw new i.uE("Bad Request.")}}catch(e){throw new i.uE(`Could not fetch attachment from Nutrient Document Engine. ${e}`)}}async search(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:D.n.TEXT;const o=`q=${i===D.n.PRESET?e.replace(/_/g,"-"):encodeURIComponent(e)}&start=${t}&limit=${n}&type=${i}&include_annotations=${s.toString()}&case_sensitive=${r.toString()}`,a=`${this._state.documentURL}/search?${o}`,l=await new g.A(a,this._state.token).request();return(0,d.g)(l.data)}async getMeasurementSnappingPoints(e){}async searchAndRedact(e,t){const{searchType:n,annotationPreset:r,searchInAnnotations:i,caseSensitive:o,startPageIndex:a,pageRange:l}=t,{color:h,fillColor:c,outlineColor:u,...d}=r,p=await this._fetch(`${this._state.documentURL}/redactions`,{method:"post",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({strategy:n,strategyOptions:{[n]:n===D.n.PRESET?e.replace(/_/g,"-"):e,includeAnnotations:i,caseSensitive:o,...void 0!==a&&{start:a},...void 0!==l&&{limit:l}},content:{...d,color:h&&h.toHex(),fillColor:c&&c.toHex(),outlineColor:u&&u.toHex()}})}),{data:m}=await p.json(),f=(0,s.B8)(m.annotations?.filter((e=>!!e.content)).map((e=>F.A.fromJSON(e.id,e.content)))||[]);if(f.size){const e=this._state.instantSettings;!this.isUsingInstantProvider()||e&&e.listenToServerChangesEnabled||await this.syncChanges()}return f}exportPDF(){let{flatten:e=!1,includeComments:t=!0,excludeAnnotations:n=!1,outputFormat:r=!1,optimize:s=!1,flattenElectronicSignatures:o=e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e&&!1===o)throw new i.uE("Cannot set `flattenElectronicSignatures` to `false` when `flatten` is set to `true`.");const a=`${this._state.documentURL}/pdf?token=${this._state.token}${e?`&flatten=${String(e)}`:""}&comments=${String(t)}&render_ap_streams=${String(!e)}&remove_annotations=${String(n)}${e?"":`&keep_signatures=${!o}`}`;if(s){const e={documentFormat:"pdf",grayscaleText:!1,grayscaleGraphics:!1,grayscaleFormFields:!1,grayscaleAnnotations:!1,grayscaleImages:!1,disableImages:!1,mrcCompression:!1,imageOptimizationQuality:2,linearize:!1};let t;if("boolean"!=typeof s){t={...e,...s}}else t=e;const{documentFormat:n,grayscaleText:r,grayscaleGraphics:i,grayscaleFormFields:o,grayscaleAnnotations:l,grayscaleImages:h,disableImages:c,mrcCompression:u,imageOptimizationQuality:d,linearize:p}=t;return fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({parts:[{document:{id:"#self"}}],output:{type:n,grayscaleText:r,grayscaleGraphics:i,grayscaleFormFields:o,grayscaleAnnotations:l,grayscaleImages:h,disableImages:c,mrcCompression:u,imageOptimizationQuality:d,linearize:p}}),credentials:"include"}).then((e=>e.arrayBuffer()))}if(r){const e={conformance:B.o.PDFA_2B,vectorization:!0,rasterization:!0};let t;if("boolean"!=typeof r){t={...e,...r}}else t=e;const{conformance:n,vectorization:s,rasterization:i}=t;return fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({parts:[{document:{id:"#self"}}],output:{type:"pdfa",conformance:n,vectorization:s,rasterization:i}}),credentials:"include"}).then((e=>e.arrayBuffer()))}return fetch(a,{method:"GET",credentials:"include"}).then((e=>e.arrayBuffer()))}exportOffice(e){let{format:t}=e;const n=`${this._state.documentURL}/build`;return this._fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({parts:[{document:{id:"#self"}}],output:{type:t.toLowerCase()}}),credentials:"include"}).then((e=>e.arrayBuffer())).catch((e=>{throw new i.uE(`Exporting to Office failed: ${e.message}`)}))}exportXFDF(){return this._fetch(`${this._state.documentURL}/document.xfdf`).then((e=>e.text()))}exportInstantJSON(e){return this._fetch(`${this._state.documentURL}/instant.json${"number"==typeof e?`?version=${e}`:""}`).then((e=>e.json()))}getPDFURL(){let{includeComments:e=!0,excludeAnnotations:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{promise:Promise.resolve(`${this._state.documentURL}/pdf?token=${this._state.token}&flatten=true&comments=${String(e)}&remove_annotations=${String(t)}`),revoke:()=>{}}}generatePDFObjectURL(){let e,{includeComments:t=!0,excludeAnnotations:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=!1;return{promise:new Promise((s=>{this.exportPDF({flatten:!0,includeComments:t,excludeAnnotations:n}).then((t=>{if(r)return;const n=new Blob([t],{type:"application/pdf"});e=window.URL.createObjectURL(n),s(e)}))})),revoke:()=>{e&&window.URL.revokeObjectURL(e),r=!0}}}async getDocumentOutline(){let e;try{e=(await this._fetch(`${this._state.documentURL}/outline.json`).then((e=>e.json()))).data}catch(t){e={}}const t=Array.isArray(e.outline)?e.outline:[];return(0,s.B8)(t.map(_.r))}async setDocumentOutline(){throw new i.uE("Not implemented in Server backend.")}async getPageGlyphs(){throw new i.uE("Not implemented in Server backend.")}onKeystrokeEvent(){throw new Error("not implemented")}async getMeasurementScales(){let e;try{return e=(await this._fetch(`${this._state.documentURL}/measurement_content_formats`).then((e=>e.json()))).data,e}catch(e){throw new i.uE(`Fetching measurement scales failed: ${e}`)}}async getSecondaryMeasurementUnit(){let e;try{return e=(await this._fetch(`${this._state.documentURL}/secondary_measurement_unit`).then((e=>e.json()))).data,e}catch(e){throw new i.uE(`Fetching secondary measurement unit failed: ${e}`)}}async setSecondaryMeasurementUnit(e){try{const t=JSON.stringify({unitTo:e?e.unitTo:null,precision:e?e.precision:null});await this._fetch(`${this._state.documentURL}/secondary_measurement_unit`,{method:"post",body:t,credentials:"include",headers:{"Content-Type":"application/json"}})}catch(e){throw new i.uE(`Setting secondary measurement unit failed: ${e}`)}}async addMeasurementScale(e){try{const t=JSON.stringify((0,u.U)(e));await this._fetch(`${this._state.documentURL}/measurement_content_formats`,{method:"post",body:t,credentials:"include",headers:{"Content-Type":"application/json"}})}catch(e){throw new i.uE(`Adding a new measurement scale failed: ${e}`)}}async removeMeasurementScale(e){try{const t=JSON.stringify((0,u.U)(e));await this._fetch(`${this._state.documentURL}/measurement_content_formats/delete`,{method:"post",body:t,credentials:"include",headers:{"Content-Type":"application/json"}})}catch(e){throw new i.uE(`Removing scale failed: ${e}`)}}async applyOperationsAndReload(e){try{const t=await J(e);this._destroyProvider(),await this._fetch(`${this._state.documentURL}/apply-operations`,{method:"post",body:t,credentials:"include"})}catch(e){throw new i.uE(`Applying operations failed: ${e}`)}return this.reloadDocument()}async applyRedactionsAndReload(){try{return this._destroyProvider(),await this._fetch(`${this._state.documentURL}/redact`,{method:"post",credentials:"include"}),this.reloadDocument()}catch(e){throw this.provider.load(),new i.uE(`Applying redactions failed: ${e}`)}}async reloadDocument(){this.clearRenderedAnnotationsCache();try{return await this.load({password:this._password})}catch(e){throw new i.uE(`Reloading the document failed: ${e}`)}}async exportPDFWithOperations(e){try{const t=await J(e);return this._fetch(`${this._state.documentURL}/pdf-with-operations`,{method:"post",body:t,credentials:"include"}).then((e=>e.arrayBuffer()))}catch(e){throw new i.uE(`Exporting PDF with operations failed: ${e}`)}}async setSignaturesLTV(e){throw new Error("not implemented")}async getSignaturesInfo(){return this._refreshSignaturesInfoPromise&&await this._refreshSignaturesInfoPromise,this._state.digitalSignatures}refreshSignaturesInfo(){return this._refreshSignaturesInfoPromise||(this._refreshSignaturesInfoPromise=new Promise(((e,t)=>{this._fetch(`${this._state.documentURL}/signatures`,{method:"get",credentials:"include"}).then((e=>e.json())).then((t=>{let{data:n}=t;this._state=this._state.set("digitalSignatures",(0,m.N5)(n)),this._refreshSignaturesInfoPromise=null,e()})).catch((e=>{this._state=this._state.set("digitalSignatures",null),this._refreshSignaturesInfoPromise=null,t(e)}))}))),this._refreshSignaturesInfoPromise}async signDocumentAndReload(e,t){(0,i.V1)(void 0===t||"object"==typeof t,"Signing service data must be an object if specified.");try{if(void 0!==t&&"object"!=typeof t)throw new i.uE("Signing service data must be an object if specified.");(0,V.r6)(e);const n=e?{..."placeholderSize"in e?{estimatedSize:e.placeholderSize}:null,..."flatten"in e?{flatten:e.flatten}:null,...e?.signatureMetadata?{signatureMetadata:(0,m.sZ)(e.signatureMetadata)}:null,..."position"in e?{position:(0,m.qN)(e.position)}:null,..."appearance"in e?{appearance:await(0,m.z8)(e.appearance)}:null,..."formFieldName"in e?{formFieldName:e.formFieldName}:null,...void 0!==e?.signingData&&"signatureContainer"in e.signingData?{signatureContainer:e.signingData.signatureContainer}:null,...void 0!==e?.signingData&&"signatureType"in e.signingData?{signatureType:m.xz[e.signingData.signatureType]}:null}:null,r=e?.appearance?.watermarkImage||null,s=e?.appearance?.graphicImage||null,o={...t?{signingToken:t.signingToken}:null,...n},a=new FormData;if(a.append("data",JSON.stringify(o)),r&&a.append("image",r),s&&a.append("graphicImage",s),this._destroyProvider(),await this._fetch(`${this._state.documentURL}/sign`,{method:"post",body:a,credentials:"include"}),await this.reloadDocument(),e?.formFieldName)return e.formFieldName}catch(e){throw this.provider.load(),new i.uE(`Adding digital signature failed: ${e.message||e}`)}}async setFontSubstitutions(e){try{const t=`${this._state.documentURL}/font-substitutions`;await this._fetch(t,{method:"put",body:JSON.stringify({fontSubstitutions:e}),credentials:"include",headers:{"Content-Type":"application/json"}})}catch(e){throw new i.uE(`Error setting font substitution: ${e.message}`)}}getDocumentHandle(){return this._state.documentHandle}async getEmbeddedFiles(){const e=await this._fetch(`${this._state.documentURL}/embedded-files`,{method:"get",credentials:"include"}),{data:t}=await e.json();return(0,s.B8)(t?.embeddedFiles?.map((e=>{let{id:t,content:n}=e;return(0,U.r)(t,n)}))||[])}cancelRequests(){this._requestQueue.cancelAll()}_destroyProvider(){this.provider&&(this.provider._clients&&this.provider._clients.disconnect(),this.provider.destroy())}async _fetch(e,t){const n=await fetch(e,{...t,headers:{...t?.headers,"X-PSPDFKit-Token":this._state.token,"PSPDFKit-Platform":"web","PSPDFKit-Version":(0,R._q)()}});if(!n.ok){let e=await function(e){return e.clone().json().catch((()=>e.text()))}(n);e="object"==typeof e?e.reason:e;const t=e||`${n.status} ${n.statusText}`;throw new i.uE(t)}return n}syncChanges(){return this.provider.syncChanges()}async clearAPStreamCache(){}async runPDFFormattingScripts(){return[]}async runPDFFormattingScriptsFromWidgets(){return this.runPDFFormattingScripts()}async lazyLoadPages(){}async contentEditorReload(){return this._destroyProvider(),this.reloadDocument()}getOCGs(){throw new Error("not implemented")}getOCGVisibilityState(){throw new Error("not implemented")}setOCGVisibilityState(){throw new Error("not implemented")}async timestampData(e,t){throw new Error("not implemented")}async waitUntilFullyLoaded(e){throw new Error("not implemented")}}async function J(e){const t={},n=new WeakMap,r=await Promise.all(e.map((async(e,r)=>{if("importDocument"===e.type){const s=e.document;return(0,i.V1)(s instanceof File||s instanceof Blob,"Wrong `importDocument` operation `document` value: it must be a File or a Blob"),(0,O.g)(n,t,s,e,r,"document")}if("applyInstantJson"===e.type){const s=e.instantJson;(0,i.V1)("object"==typeof s&&null!==s,"Wrong `applyInstantJson` operation `instantJson` value: it must be an object");const o=JSON.stringify(s),a=new Blob([o],{type:"application/json"});return(0,O.g)(n,t,a,e,r,"dataFilePath")}if("applyXfdf"===e.type){const s=e.xfdf;(0,i.V1)("string"==typeof s,"Wrong `applyXfdf` operation `xfdf` value: it must be a string");const o=new Blob([s],{type:"application/vnd.adobe.xfdf"});return(0,O.g)(n,t,o,e,r,"dataFilePath")}return e}))),s=new FormData;s.append("operations",JSON.stringify({operations:r}));for(const e in t)s.append(e,t[e]);return s}},4824:(e,t,n)=>{"use strict";n.d(t,{S:()=>r,z:()=>s});const r={clientsPresenceEnabled:!0,listenToServerChangesEnabled:!0},s={clientsPresenceEnabled:!1,listenToServerChangesEnabled:!1}},93904:(e,t,n)=>{const r=Symbol("SemVer ANY");class s{static get ANY(){return r}constructor(e,t){if(t=i(t),e instanceof s){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),h("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===r?this.value="":this.value=this.operator+this.semver.version,h("comp",this)}parse(e){const t=this.options.loose?o[a.COMPARATORLOOSE]:o[a.COMPARATOR],n=e.match(t);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new c(n[2],this.options.loose):this.semver=r}toString(){return this.value}test(e){if(h("Comparator.test",e,this.options.loose),this.semver===r||e===r)return!0;if("string"==typeof e)try{e=new c(e,this.options)}catch(e){return!1}return l(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof s))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new u(e.value,t).test(this.value):""===e.operator?""===e.value||new u(this.value,t).test(e.semver):(!(t=i(t)).includePrerelease||"<0.0.0-0"!==this.value&&"<0.0.0-0"!==e.value)&&(!(!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0")))&&(!(!this.operator.startsWith(">")||!e.operator.startsWith(">"))||(!(!this.operator.startsWith("<")||!e.operator.startsWith("<"))||(!(this.semver.version!==e.semver.version||!this.operator.includes("=")||!e.operator.includes("="))||(!!(l(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<"))||!!(l(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))))))}}e.exports=s;const i=n(98587),{safeRe:o,t:a}=n(99718),l=n(72111),h=n(57272),c=n(53908),u=n(78311)},78311:(e,t,n)=>{class r{constructor(e,t){if(t=i(t),e instanceof r)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new r(e.raw,t);if(e instanceof o)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!g(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&E(e[0])){this.set=[e];break}}this.format()}format(){return this.range=this.set.map((e=>e.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(e){const t=((this.options.includePrerelease&&m)|(this.options.loose&&f))+":"+e,n=s.get(t);if(n)return n;const r=this.options.loose,i=r?h[c.HYPHENRANGELOOSE]:h[c.HYPHENRANGE];e=e.replace(i,N(this.options.includePrerelease)),a("hyphen replace",e),e=e.replace(h[c.COMPARATORTRIM],u),a("comparator trim",e),e=e.replace(h[c.TILDETRIM],d),a("tilde trim",e),e=e.replace(h[c.CARETTRIM],p),a("caret trim",e);let l=e.split(" ").map((e=>w(e,this.options))).join(" ").split(/\s+/).map((e=>_(e,this.options)));r&&(l=l.filter((e=>(a("loose invalid filter",e,this.options),!!e.match(h[c.COMPARATORLOOSE]))))),a("range list",l);const E=new Map,v=l.map((e=>new o(e,this.options)));for(const e of v){if(g(e))return[e];E.set(e.value,e)}E.size>1&&E.has("")&&E.delete("");const y=[...E.values()];return s.set(t,y),y}intersects(e,t){if(!(e instanceof r))throw new TypeError("a Range is required");return this.set.some((n=>v(n,t)&&e.set.some((e=>v(e,t)&&n.every((n=>e.every((e=>n.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new l(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(T(this.set[t],e,this.options))return!0;return!1}}e.exports=r;const s=new(n(38357))({max:1e3}),i=n(98587),o=n(93904),a=n(57272),l=n(53908),{safeRe:h,t:c,comparatorTrimReplace:u,tildeTrimReplace:d,caretTrimReplace:p}=n(99718),{FLAG_INCLUDE_PRERELEASE:m,FLAG_LOOSE:f}=n(94493),g=e=>"<0.0.0-0"===e.value,E=e=>""===e.value,v=(e,t)=>{let n=!0;const r=e.slice();let s=r.pop();for(;n&&r.length;)n=r.every((e=>s.intersects(e,t))),s=r.pop();return n},w=(e,t)=>(a("comp",e,t),e=S(e,t),a("caret",e),e=$(e,t),a("tildes",e),e=P(e,t),a("xrange",e),e=A(e,t),a("stars",e),e),y=e=>!e||"x"===e.toLowerCase()||"*"===e,$=(e,t)=>e.trim().split(/\s+/).map((e=>R(e,t))).join(" "),R=(e,t)=>{const n=t.loose?h[c.TILDELOOSE]:h[c.TILDE];return e.replace(n,((t,n,r,s,i)=>{let o;return a("tilde",e,t,n,r,s,i),y(n)?o="":y(r)?o=`>=${n}.0.0 <${+n+1}.0.0-0`:y(s)?o=`>=${n}.${r}.0 <${n}.${+r+1}.0-0`:i?(a("replaceTilde pr",i),o=`>=${n}.${r}.${s}-${i} <${n}.${+r+1}.0-0`):o=`>=${n}.${r}.${s} <${n}.${+r+1}.0-0`,a("tilde return",o),o}))},S=(e,t)=>e.trim().split(/\s+/).map((e=>I(e,t))).join(" "),I=(e,t)=>{a("caret",e,t);const n=t.loose?h[c.CARETLOOSE]:h[c.CARET],r=t.includePrerelease?"-0":"";return e.replace(n,((t,n,s,i,o)=>{let l;return a("caret",e,t,n,s,i,o),y(n)?l="":y(s)?l=`>=${n}.0.0${r} <${+n+1}.0.0-0`:y(i)?l="0"===n?`>=${n}.${s}.0${r} <${n}.${+s+1}.0-0`:`>=${n}.${s}.0${r} <${+n+1}.0.0-0`:o?(a("replaceCaret pr",o),l="0"===n?"0"===s?`>=${n}.${s}.${i}-${o} <${n}.${s}.${+i+1}-0`:`>=${n}.${s}.${i}-${o} <${n}.${+s+1}.0-0`:`>=${n}.${s}.${i}-${o} <${+n+1}.0.0-0`):(a("no pr"),l="0"===n?"0"===s?`>=${n}.${s}.${i}${r} <${n}.${s}.${+i+1}-0`:`>=${n}.${s}.${i}${r} <${n}.${+s+1}.0-0`:`>=${n}.${s}.${i} <${+n+1}.0.0-0`),a("caret return",l),l}))},P=(e,t)=>(a("replaceXRanges",e,t),e.split(/\s+/).map((e=>b(e,t))).join(" ")),b=(e,t)=>{e=e.trim();const n=t.loose?h[c.XRANGELOOSE]:h[c.XRANGE];return e.replace(n,((n,r,s,i,o,l)=>{a("xRange",e,n,r,s,i,o,l);const h=y(s),c=h||y(i),u=c||y(o),d=u;return"="===r&&d&&(r=""),l=t.includePrerelease?"-0":"",h?n=">"===r||"<"===r?"<0.0.0-0":"*":r&&d?(c&&(i=0),o=0,">"===r?(r=">=",c?(s=+s+1,i=0,o=0):(i=+i+1,o=0)):"<="===r&&(r="<",c?s=+s+1:i=+i+1),"<"===r&&(l="-0"),n=`${r+s}.${i}.${o}${l}`):c?n=`>=${s}.0.0${l} <${+s+1}.0.0-0`:u&&(n=`>=${s}.${i}.0${l} <${s}.${+i+1}.0-0`),a("xRange return",n),n}))},A=(e,t)=>(a("replaceStars",e,t),e.trim().replace(h[c.STAR],"")),_=(e,t)=>(a("replaceGTE0",e,t),e.trim().replace(h[t.includePrerelease?c.GTE0PRE:c.GTE0],"")),N=e=>(t,n,r,s,i,o,a,l,h,c,u,d,p)=>`${n=y(r)?"":y(s)?`>=${r}.0.0${e?"-0":""}`:y(i)?`>=${r}.${s}.0${e?"-0":""}`:o?`>=${n}`:`>=${n}${e?"-0":""}`} ${l=y(h)?"":y(c)?`<${+h+1}.0.0-0`:y(u)?`<${h}.${+c+1}.0-0`:d?`<=${h}.${c}.${u}-${d}`:e?`<${h}.${c}.${+u+1}-0`:`<=${l}`}`.trim(),T=(e,t,n)=>{for(let n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(let n=0;n<e.length;n++)if(a(e[n].semver),e[n].semver!==o.ANY&&e[n].semver.prerelease.length>0){const r=e[n].semver;if(r.major===t.major&&r.minor===t.minor&&r.patch===t.patch)return!0}return!1}return!0}},53908:(e,t,n)=>{const r=n(57272),{MAX_LENGTH:s,MAX_SAFE_INTEGER:i}=n(94493),{safeRe:o,t:a}=n(99718),l=n(98587),{compareIdentifiers:h}=n(61123);class c{constructor(e,t){if(t=l(t),e instanceof c){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>s)throw new TypeError(`version is longer than ${s} characters`);r("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const n=e.trim().match(t.loose?o[a.LOOSE]:o[a.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<i)return t}return e})):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(r("SemVer.compare",this.version,this.options,e),!(e instanceof c)){if("string"==typeof e&&e===this.version)return 0;e=new c(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof c||(e=new c(e,this.options)),h(this.major,e.major)||h(this.minor,e.minor)||h(this.patch,e.patch)}comparePre(e){if(e instanceof c||(e=new c(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const n=this.prerelease[t],s=e.prerelease[t];if(r("prerelease compare",t,n,s),void 0===n&&void 0===s)return 0;if(void 0===s)return 1;if(void 0===n)return-1;if(n!==s)return h(n,s)}while(++t)}compareBuild(e){e instanceof c||(e=new c(e,this.options));let t=0;do{const n=this.build[t],s=e.build[t];if(r("prerelease compare",t,n,s),void 0===n&&void 0===s)return 0;if(void 0===s)return 1;if(void 0===n)return-1;if(n!==s)return h(n,s)}while(++t)}inc(e,t,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,n),this.inc("pre",t,n);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,n),this.inc("pre",t,n);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(n)?1:0;if(!t&&!1===n)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[e];else{let r=this.prerelease.length;for(;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);if(-1===r){if(t===this.prerelease.join(".")&&!1===n)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let r=[t,e];!1===n&&(r=[t]),0===h(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=r):this.prerelease=r}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}e.exports=c},57414:(e,t,n)=>{const r=n(30144);e.exports=(e,t)=>{const n=r(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null}},72111:(e,t,n)=>{const r=n(94641),s=n(13999),i=n(35580),o=n(54089),a=n(7059),l=n(25200);e.exports=(e,t,n,h)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return r(e,n,h);case"!=":return s(e,n,h);case">":return i(e,n,h);case">=":return o(e,n,h);case"<":return a(e,n,h);case"<=":return l(e,n,h);default:throw new TypeError(`Invalid operator: ${t}`)}}},46170:(e,t,n)=>{const r=n(53908),s=n(30144),{safeRe:i,t:o}=n(99718);e.exports=(e,t)=>{if(e instanceof r)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let n=null;if((t=t||{}).rtl){let t;for(;(t=i[o.COERCERTL].exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&t.index+t[0].length===n.index+n[0].length||(n=t),i[o.COERCERTL].lastIndex=t.index+t[1].length+t[2].length;i[o.COERCERTL].lastIndex=-1}else n=e.match(i[o.COERCE]);return null===n?null:s(`${n[2]}.${n[3]||"0"}.${n[4]||"0"}`,t)}},40909:(e,t,n)=>{const r=n(53908);e.exports=(e,t,n)=>{const s=new r(e,n),i=new r(t,n);return s.compare(i)||s.compareBuild(i)}},11763:(e,t,n)=>{const r=n(50560);e.exports=(e,t)=>r(e,t,!0)},50560:(e,t,n)=>{const r=n(53908);e.exports=(e,t,n)=>new r(e,n).compare(new r(t,n))},51832:(e,t,n)=>{const r=n(30144);e.exports=(e,t)=>{const n=r(e,null,!0),s=r(t,null,!0),i=n.compare(s);if(0===i)return null;const o=i>0,a=o?n:s,l=o?s:n,h=!!a.prerelease.length;if(!!l.prerelease.length&&!h)return l.patch||l.minor?a.patch?"patch":a.minor?"minor":"major":"major";const c=h?"pre":"";return n.major!==s.major?c+"major":n.minor!==s.minor?c+"minor":n.patch!==s.patch?c+"patch":"prerelease"}},94641:(e,t,n)=>{const r=n(50560);e.exports=(e,t,n)=>0===r(e,t,n)},35580:(e,t,n)=>{const r=n(50560);e.exports=(e,t,n)=>r(e,t,n)>0},54089:(e,t,n)=>{const r=n(50560);e.exports=(e,t,n)=>r(e,t,n)>=0},93007:(e,t,n)=>{const r=n(53908);e.exports=(e,t,n,s,i)=>{"string"==typeof n&&(i=s,s=n,n=void 0);try{return new r(e instanceof r?e.version:e,n).inc(t,s,i).version}catch(e){return null}}},7059:(e,t,n)=>{const r=n(50560);e.exports=(e,t,n)=>r(e,t,n)<0},25200:(e,t,n)=>{const r=n(50560);e.exports=(e,t,n)=>r(e,t,n)<=0},32938:(e,t,n)=>{const r=n(53908);e.exports=(e,t)=>new r(e,t).major},46254:(e,t,n)=>{const r=n(53908);e.exports=(e,t)=>new r(e,t).minor},13999:(e,t,n)=>{const r=n(50560);e.exports=(e,t,n)=>0!==r(e,t,n)},30144:(e,t,n)=>{const r=n(53908);e.exports=(e,t,n=!1)=>{if(e instanceof r)return e;try{return new r(e,t)}catch(e){if(!n)return null;throw e}}},24493:(e,t,n)=>{const r=n(53908);e.exports=(e,t)=>new r(e,t).patch},31729:(e,t,n)=>{const r=n(30144);e.exports=(e,t)=>{const n=r(e,t);return n&&n.prerelease.length?n.prerelease:null}},9970:(e,t,n)=>{const r=n(50560);e.exports=(e,t,n)=>r(t,e,n)},74277:(e,t,n)=>{const r=n(40909);e.exports=(e,t)=>e.sort(((e,n)=>r(n,e,t)))},97638:(e,t,n)=>{const r=n(78311);e.exports=(e,t,n)=>{try{t=new r(t,n)}catch(e){return!1}return t.test(e)}},43927:(e,t,n)=>{const r=n(40909);e.exports=(e,t)=>e.sort(((e,n)=>r(e,n,t)))},56953:(e,t,n)=>{const r=n(30144);e.exports=(e,t)=>{const n=r(e,t);return n?n.version:null}},99589:(e,t,n)=>{const r=n(99718),s=n(94493),i=n(53908),o=n(61123),a=n(30144),l=n(56953),h=n(57414),c=n(93007),u=n(51832),d=n(32938),p=n(46254),m=n(24493),f=n(31729),g=n(50560),E=n(9970),v=n(11763),w=n(40909),y=n(43927),$=n(74277),R=n(35580),S=n(7059),I=n(94641),P=n(13999),b=n(54089),A=n(25200),_=n(72111),N=n(46170),T=n(93904),L=n(78311),O=n(97638),x=n(77631),F=n(19628),D=n(270),C=n(41261),U=n(13874),j=n(97075),k=n(75571),M=n(5342),G=n(76780),B=n(72525),V=n(75032);e.exports={parse:a,valid:l,clean:h,inc:c,diff:u,major:d,minor:p,patch:m,prerelease:f,compare:g,rcompare:E,compareLoose:v,compareBuild:w,sort:y,rsort:$,gt:R,lt:S,eq:I,neq:P,gte:b,lte:A,cmp:_,coerce:N,Comparator:T,Range:L,satisfies:O,toComparators:x,maxSatisfying:F,minSatisfying:D,minVersion:C,validRange:U,outside:j,gtr:k,ltr:M,intersects:G,simplifyRange:B,subset:V,SemVer:i,re:r.re,src:r.src,tokens:r.t,SEMVER_SPEC_VERSION:s.SEMVER_SPEC_VERSION,RELEASE_TYPES:s.RELEASE_TYPES,compareIdentifiers:o.compareIdentifiers,rcompareIdentifiers:o.rcompareIdentifiers}},94493:e=>{const t=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:t,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},57272:e=>{const t="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=t},61123:e=>{const t=/^[0-9]+$/,n=(e,n)=>{const r=t.test(e),s=t.test(n);return r&&s&&(e=+e,n=+n),e===n?0:r&&!s?-1:s&&!r?1:e<n?-1:1};e.exports={compareIdentifiers:n,rcompareIdentifiers:(e,t)=>n(t,e)}},98587:e=>{const t=Object.freeze({loose:!0}),n=Object.freeze({});e.exports=e=>e?"object"!=typeof e?t:e:n},99718:(e,t,n)=>{const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:s,MAX_LENGTH:i}=n(94493),o=n(57272),a=(t=e.exports={}).re=[],l=t.safeRe=[],h=t.src=[],c=t.t={};let u=0;const d="[a-zA-Z0-9-]",p=[["\\s",1],["\\d",i],[d,s]],m=(e,t,n)=>{const r=(e=>{for(const[t,n]of p)e=e.split(`${t}*`).join(`${t}{0,${n}}`).split(`${t}+`).join(`${t}{1,${n}}`);return e})(t),s=u++;o(e,s,t),c[e]=s,h[s]=t,a[s]=new RegExp(t,n?"g":void 0),l[s]=new RegExp(r,n?"g":void 0)};m("NUMERICIDENTIFIER","0|[1-9]\\d*"),m("NUMERICIDENTIFIERLOOSE","\\d+"),m("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d}*`),m("MAINVERSION",`(${h[c.NUMERICIDENTIFIER]})\\.(${h[c.NUMERICIDENTIFIER]})\\.(${h[c.NUMERICIDENTIFIER]})`),m("MAINVERSIONLOOSE",`(${h[c.NUMERICIDENTIFIERLOOSE]})\\.(${h[c.NUMERICIDENTIFIERLOOSE]})\\.(${h[c.NUMERICIDENTIFIERLOOSE]})`),m("PRERELEASEIDENTIFIER",`(?:${h[c.NUMERICIDENTIFIER]}|${h[c.NONNUMERICIDENTIFIER]})`),m("PRERELEASEIDENTIFIERLOOSE",`(?:${h[c.NUMERICIDENTIFIERLOOSE]}|${h[c.NONNUMERICIDENTIFIER]})`),m("PRERELEASE",`(?:-(${h[c.PRERELEASEIDENTIFIER]}(?:\\.${h[c.PRERELEASEIDENTIFIER]})*))`),m("PRERELEASELOOSE",`(?:-?(${h[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${h[c.PRERELEASEIDENTIFIERLOOSE]})*))`),m("BUILDIDENTIFIER",`${d}+`),m("BUILD",`(?:\\+(${h[c.BUILDIDENTIFIER]}(?:\\.${h[c.BUILDIDENTIFIER]})*))`),m("FULLPLAIN",`v?${h[c.MAINVERSION]}${h[c.PRERELEASE]}?${h[c.BUILD]}?`),m("FULL",`^${h[c.FULLPLAIN]}$`),m("LOOSEPLAIN",`[v=\\s]*${h[c.MAINVERSIONLOOSE]}${h[c.PRERELEASELOOSE]}?${h[c.BUILD]}?`),m("LOOSE",`^${h[c.LOOSEPLAIN]}$`),m("GTLT","((?:<|>)?=?)"),m("XRANGEIDENTIFIERLOOSE",`${h[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),m("XRANGEIDENTIFIER",`${h[c.NUMERICIDENTIFIER]}|x|X|\\*`),m("XRANGEPLAIN",`[v=\\s]*(${h[c.XRANGEIDENTIFIER]})(?:\\.(${h[c.XRANGEIDENTIFIER]})(?:\\.(${h[c.XRANGEIDENTIFIER]})(?:${h[c.PRERELEASE]})?${h[c.BUILD]}?)?)?`),m("XRANGEPLAINLOOSE",`[v=\\s]*(${h[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${h[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${h[c.XRANGEIDENTIFIERLOOSE]})(?:${h[c.PRERELEASELOOSE]})?${h[c.BUILD]}?)?)?`),m("XRANGE",`^${h[c.GTLT]}\\s*${h[c.XRANGEPLAIN]}$`),m("XRANGELOOSE",`^${h[c.GTLT]}\\s*${h[c.XRANGEPLAINLOOSE]}$`),m("COERCE",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?(?:$|[^\\d])`),m("COERCERTL",h[c.COERCE],!0),m("LONETILDE","(?:~>?)"),m("TILDETRIM",`(\\s*)${h[c.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",m("TILDE",`^${h[c.LONETILDE]}${h[c.XRANGEPLAIN]}$`),m("TILDELOOSE",`^${h[c.LONETILDE]}${h[c.XRANGEPLAINLOOSE]}$`),m("LONECARET","(?:\\^)"),m("CARETTRIM",`(\\s*)${h[c.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",m("CARET",`^${h[c.LONECARET]}${h[c.XRANGEPLAIN]}$`),m("CARETLOOSE",`^${h[c.LONECARET]}${h[c.XRANGEPLAINLOOSE]}$`),m("COMPARATORLOOSE",`^${h[c.GTLT]}\\s*(${h[c.LOOSEPLAIN]})$|^$`),m("COMPARATOR",`^${h[c.GTLT]}\\s*(${h[c.FULLPLAIN]})$|^$`),m("COMPARATORTRIM",`(\\s*)${h[c.GTLT]}\\s*(${h[c.LOOSEPLAIN]}|${h[c.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",m("HYPHENRANGE",`^\\s*(${h[c.XRANGEPLAIN]})\\s+-\\s+(${h[c.XRANGEPLAIN]})\\s*$`),m("HYPHENRANGELOOSE",`^\\s*(${h[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${h[c.XRANGEPLAINLOOSE]})\\s*$`),m("STAR","(<|>)?=?\\s*\\*"),m("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),m("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},38357:(e,t,n)=>{"use strict";const r=n(4927),s=Symbol("max"),i=Symbol("length"),o=Symbol("lengthCalculator"),a=Symbol("allowStale"),l=Symbol("maxAge"),h=Symbol("dispose"),c=Symbol("noDisposeOnSet"),u=Symbol("lruList"),d=Symbol("cache"),p=Symbol("updateAgeOnGet"),m=()=>1;const f=(e,t,n)=>{const r=e[d].get(t);if(r){const t=r.value;if(g(e,t)){if(v(e,r),!e[a])return}else n&&(e[p]&&(r.value.now=Date.now()),e[u].unshiftNode(r));return t.value}},g=(e,t)=>{if(!t||!t.maxAge&&!e[l])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[l]&&n>e[l]},E=e=>{if(e[i]>e[s])for(let t=e[u].tail;e[i]>e[s]&&null!==t;){const n=t.prev;v(e,t),t=n}},v=(e,t)=>{if(t){const n=t.value;e[h]&&e[h](n.key,n.value),e[i]-=n.length,e[d].delete(n.key),e[u].removeNode(t)}};class w{constructor(e,t,n,r,s){this.key=e,this.value=t,this.length=n,this.now=r,this.maxAge=s||0}}const y=(e,t,n,r)=>{let s=n.value;g(e,s)&&(v(e,n),e[a]||(s=void 0)),s&&t.call(r,s.value,s.key,e)};e.exports=class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[s]=e.max||1/0;const t=e.length||m;if(this[o]="function"!=typeof t?m:t,this[a]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[l]=e.maxAge||0,this[h]=e.dispose,this[c]=e.noDisposeOnSet||!1,this[p]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[s]=e||1/0,E(this)}get max(){return this[s]}set allowStale(e){this[a]=!!e}get allowStale(){return this[a]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[l]=e,E(this)}get maxAge(){return this[l]}set lengthCalculator(e){"function"!=typeof e&&(e=m),e!==this[o]&&(this[o]=e,this[i]=0,this[u].forEach((e=>{e.length=this[o](e.value,e.key),this[i]+=e.length}))),E(this)}get lengthCalculator(){return this[o]}get length(){return this[i]}get itemCount(){return this[u].length}rforEach(e,t){t=t||this;for(let n=this[u].tail;null!==n;){const r=n.prev;y(this,e,n,t),n=r}}forEach(e,t){t=t||this;for(let n=this[u].head;null!==n;){const r=n.next;y(this,e,n,t),n=r}}keys(){return this[u].toArray().map((e=>e.key))}values(){return this[u].toArray().map((e=>e.value))}reset(){this[h]&&this[u]&&this[u].length&&this[u].forEach((e=>this[h](e.key,e.value))),this[d]=new Map,this[u]=new r,this[i]=0}dump(){return this[u].map((e=>!g(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)})).toArray().filter((e=>e))}dumpLru(){return this[u]}set(e,t,n){if((n=n||this[l])&&"number"!=typeof n)throw new TypeError("maxAge must be a number");const r=n?Date.now():0,a=this[o](t,e);if(this[d].has(e)){if(a>this[s])return v(this,this[d].get(e)),!1;const o=this[d].get(e).value;return this[h]&&(this[c]||this[h](e,o.value)),o.now=r,o.maxAge=n,o.value=t,this[i]+=a-o.length,o.length=a,this.get(e),E(this),!0}const p=new w(e,t,a,r,n);return p.length>this[s]?(this[h]&&this[h](e,t),!1):(this[i]+=p.length,this[u].unshift(p),this[d].set(e,this[u].head),E(this),!0)}has(e){if(!this[d].has(e))return!1;const t=this[d].get(e).value;return!g(this,t)}get(e){return f(this,e,!0)}peek(e){return f(this,e,!1)}pop(){const e=this[u].tail;return e?(v(this,e),e.value):null}del(e){v(this,this[d].get(e))}load(e){this.reset();const t=Date.now();for(let n=e.length-1;n>=0;n--){const r=e[n],s=r.e||0;if(0===s)this.set(r.k,r.v);else{const e=s-t;e>0&&this.set(r.k,r.v,e)}}}prune(){this[d].forEach(((e,t)=>f(this,t,!1)))}}},50723:e=>{"use strict";e.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}},4927:(e,t,n)=>{"use strict";function r(e){var t=this;if(t instanceof r||(t=new r),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var n=0,s=arguments.length;n<s;n++)t.push(arguments[n]);return t}function s(e,t,n){var r=t===e.head?new a(n,null,t,e):new a(n,t,t.next,e);return null===r.next&&(e.tail=r),null===r.prev&&(e.head=r),e.length++,r}function i(e,t){e.tail=new a(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function o(e,t){e.head=new a(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function a(e,t,n,r){if(!(this instanceof a))return new a(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}e.exports=r,r.Node=a,r.create=r,r.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t},r.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},r.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},r.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)i(this,arguments[e]);return this.length},r.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)o(this,arguments[e]);return this.length},r.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},r.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},r.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;null!==n;r++)e.call(t,n.value,r,this),n=n.next},r.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;null!==n;r--)e.call(t,n.value,r,this),n=n.prev},r.prototype.get=function(e){for(var t=0,n=this.head;null!==n&&t<e;t++)n=n.next;if(t===e&&null!==n)return n.value},r.prototype.getReverse=function(e){for(var t=0,n=this.tail;null!==n&&t<e;t++)n=n.prev;if(t===e&&null!==n)return n.value},r.prototype.map=function(e,t){t=t||this;for(var n=new r,s=this.head;null!==s;)n.push(e.call(t,s.value,this)),s=s.next;return n},r.prototype.mapReverse=function(e,t){t=t||this;for(var n=new r,s=this.tail;null!==s;)n.push(e.call(t,s.value,this)),s=s.prev;return n},r.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,n=this.head.value}for(var s=0;null!==r;s++)n=e(n,r.value,s),r=r.next;return n},r.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,n=this.tail.value}for(var s=this.length-1;null!==r;s--)n=e(n,r.value,s),r=r.prev;return n},r.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;null!==n;t++)e[t]=n.value,n=n.next;return e},r.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;null!==n;t++)e[t]=n.value,n=n.prev;return e},r.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new r;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var s=0,i=this.head;null!==i&&s<e;s++)i=i.next;for(;null!==i&&s<t;s++,i=i.next)n.push(i.value);return n},r.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new r;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var s=this.length,i=this.tail;null!==i&&s>t;s--)i=i.prev;for(;null!==i&&s>e;s--,i=i.prev)n.push(i.value);return n},r.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;null!==i&&r<e;r++)i=i.next;var o=[];for(r=0;i&&r<t;r++)o.push(i.value),i=this.removeNode(i);null===i&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(r=0;r<n.length;r++)i=s(this,i,n[r]);return o},r.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;null!==n;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};try{n(50723)(r)}catch(e){}},75571:(e,t,n)=>{const r=n(97075);e.exports=(e,t,n)=>r(e,t,">",n)},76780:(e,t,n)=>{const r=n(78311);e.exports=(e,t,n)=>(e=new r(e,n),t=new r(t,n),e.intersects(t,n))},5342:(e,t,n)=>{const r=n(97075);e.exports=(e,t,n)=>r(e,t,"<",n)},19628:(e,t,n)=>{const r=n(53908),s=n(78311);e.exports=(e,t,n)=>{let i=null,o=null,a=null;try{a=new s(t,n)}catch(e){return null}return e.forEach((e=>{a.test(e)&&(i&&-1!==o.compare(e)||(i=e,o=new r(i,n)))})),i}},270:(e,t,n)=>{const r=n(53908),s=n(78311);e.exports=(e,t,n)=>{let i=null,o=null,a=null;try{a=new s(t,n)}catch(e){return null}return e.forEach((e=>{a.test(e)&&(i&&1!==o.compare(e)||(i=e,o=new r(i,n)))})),i}},41261:(e,t,n)=>{const r=n(53908),s=n(78311),i=n(35580);e.exports=(e,t)=>{e=new s(e,t);let n=new r("0.0.0");if(e.test(n))return n;if(n=new r("0.0.0-0"),e.test(n))return n;n=null;for(let t=0;t<e.set.length;++t){const s=e.set[t];let o=null;s.forEach((e=>{const t=new r(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":o&&!i(t,o)||(o=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),!o||n&&!i(n,o)||(n=o)}return n&&e.test(n)?n:null}},97075:(e,t,n)=>{const r=n(53908),s=n(93904),{ANY:i}=s,o=n(78311),a=n(97638),l=n(35580),h=n(7059),c=n(25200),u=n(54089);e.exports=(e,t,n,d)=>{let p,m,f,g,E;switch(e=new r(e,d),t=new o(t,d),n){case">":p=l,m=c,f=h,g=">",E=">=";break;case"<":p=h,m=u,f=l,g="<",E="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(a(e,t,d))return!1;for(let n=0;n<t.set.length;++n){const r=t.set[n];let o=null,a=null;if(r.forEach((e=>{e.semver===i&&(e=new s(">=0.0.0")),o=o||e,a=a||e,p(e.semver,o.semver,d)?o=e:f(e.semver,a.semver,d)&&(a=e)})),o.operator===g||o.operator===E)return!1;if((!a.operator||a.operator===g)&&m(e,a.semver))return!1;if(a.operator===E&&f(e,a.semver))return!1}return!0}},72525:(e,t,n)=>{const r=n(97638),s=n(50560);e.exports=(e,t,n)=>{const i=[];let o=null,a=null;const l=e.sort(((e,t)=>s(e,t,n)));for(const e of l){r(e,t,n)?(a=e,o||(o=e)):(a&&i.push([o,a]),a=null,o=null)}o&&i.push([o,null]);const h=[];for(const[e,t]of i)e===t?h.push(e):t||e!==l[0]?t?e===l[0]?h.push(`<=${t}`):h.push(`${e} - ${t}`):h.push(`>=${e}`):h.push("*");const c=h.join(" || "),u="string"==typeof t.raw?t.raw:String(t);return c.length<u.length?c:t}},75032:(e,t,n)=>{const r=n(78311),s=n(93904),{ANY:i}=s,o=n(97638),a=n(50560),l=[new s(">=0.0.0-0")],h=[new s(">=0.0.0")],c=(e,t,n)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===i){if(1===t.length&&t[0].semver===i)return!0;e=n.includePrerelease?l:h}if(1===t.length&&t[0].semver===i){if(n.includePrerelease)return!0;t=h}const r=new Set;let s,c,p,m,f,g,E;for(const t of e)">"===t.operator||">="===t.operator?s=u(s,t,n):"<"===t.operator||"<="===t.operator?c=d(c,t,n):r.add(t.semver);if(r.size>1)return null;if(s&&c){if(p=a(s.semver,c.semver,n),p>0)return null;if(0===p&&(">="!==s.operator||"<="!==c.operator))return null}for(const e of r){if(s&&!o(e,String(s),n))return null;if(c&&!o(e,String(c),n))return null;for(const r of t)if(!o(e,String(r),n))return!1;return!0}let v=!(!c||n.includePrerelease||!c.semver.prerelease.length)&&c.semver,w=!(!s||n.includePrerelease||!s.semver.prerelease.length)&&s.semver;v&&1===v.prerelease.length&&"<"===c.operator&&0===v.prerelease[0]&&(v=!1);for(const e of t){if(E=E||">"===e.operator||">="===e.operator,g=g||"<"===e.operator||"<="===e.operator,s)if(w&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===w.major&&e.semver.minor===w.minor&&e.semver.patch===w.patch&&(w=!1),">"===e.operator||">="===e.operator){if(m=u(s,e,n),m===e&&m!==s)return!1}else if(">="===s.operator&&!o(s.semver,String(e),n))return!1;if(c)if(v&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===v.major&&e.semver.minor===v.minor&&e.semver.patch===v.patch&&(v=!1),"<"===e.operator||"<="===e.operator){if(f=d(c,e,n),f===e&&f!==c)return!1}else if("<="===c.operator&&!o(c.semver,String(e),n))return!1;if(!e.operator&&(c||s)&&0!==p)return!1}return!(s&&g&&!c&&0!==p)&&(!(c&&E&&!s&&0!==p)&&(!w&&!v))},u=(e,t,n)=>{if(!e)return t;const r=a(e.semver,t.semver,n);return r>0?e:r<0||">"===t.operator&&">="===e.operator?t:e},d=(e,t,n)=>{if(!e)return t;const r=a(e.semver,t.semver,n);return r<0?e:r>0||"<"===t.operator&&"<="===e.operator?t:e};e.exports=(e,t,n={})=>{if(e===t)return!0;e=new r(e,n),t=new r(t,n);let s=!1;e:for(const r of e.set){for(const e of t.set){const t=c(r,e,n);if(s=s||null!==t,t)continue e}if(s)return!1}return!0}},77631:(e,t,n)=>{const r=n(78311);e.exports=(e,t)=>new r(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")))},13874:(e,t,n)=>{const r=n(78311);e.exports=(e,t)=>{try{return new r(e,t).range||"*"}catch(e){return null}}}}]);